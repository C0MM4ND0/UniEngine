var MToolTip="",CToolTip="",DToolTip="",EToolTip="",constants={colorsValues:{red:"#ff0000",green:"#00ff00"}},ReplaceArr=new Array("_ResName_","_ResIncome_","_ResFullTime_","_ResStoreStatus_"),ResTipStyle={classes:"tiptip_content ui-tooltip-tipsy ui-tooltip-shadow"},qTipSettings={show:{delay:0,effect:!1},hide:{delay:0,effect:!1},style:ResTipStyle};function number_format(value){value+="";for(var rgx=/(\d+)(\d\d\d)/;rgx.test(value);)value=value.replace(rgx,"$1.$2");return value}function buildResourceUpdaterCache(params){const cache={previousElapsedTime:-1/0,resources:{}};return params.resources.forEach(resourceDetails=>{cache.resources[resourceDetails.resourceKey]={hasReachedRealMaxCapacity:!1}}),cache}function updateResourceCounters(params,cache){const $parentEl=params.$parentEl,elapsedTime=Math.floor((params.timestamps.current-params.timestamps.initial)/1e3);elapsedTime<=cache.previousElapsedTime||(params.resources.forEach(resourceDetails=>{const resourceKey=resourceDetails.resourceKey;if(cache.resources[resourceKey].hasReachedRealMaxCapacity)return;const $resourceEl=$parentEl.find(`[data-resource-key="${resourceKey}"]`),selectors={$resourceAmount:$resourceEl.find(".amount_display"),$resourceStorage:$resourceEl.find(".storage_display")},resourceState=_calculateResourceState({elapsedTime,resourceDetails});_updateResourceCounterDOM(selectors,resourceState),cache.resources[resourceKey].hasReachedRealMaxCapacity=resourceState.hasReachedRealMaxCapacity}),cache.previousElapsedTime=elapsedTime)}function _calculateResourceState(params){const maxPracticalStorage=Math.max(params.resourceDetails.storage.maxCapacity,params.resourceDetails.storage.overflowCapacity),theoreticalIncome=params.resourceDetails.state.incomePerHour/3600*params.elapsedTime,theoreticalResourceAmount=params.resourceDetails.state.initial+theoreticalIncome,finalResourceAmount=Math.min(maxPracticalStorage,theoreticalResourceAmount),hasReachedStorageMaxCapacity=finalResourceAmount>=params.resourceDetails.storage.maxCapacity,hasReachedRealMaxCapacity=finalResourceAmount>=maxPracticalStorage;return{currentResourceAmount:finalResourceAmount,hasReachedStorageMaxCapacity,hasReachedRealMaxCapacity}}function _updateResourceCounterDOM(selectors,resourceState){const resourceDisplayValue=number_format(Math.floor(resourceState.currentResourceAmount)),resourceDisplayColor=resourceState.hasReachedStorageMaxCapacity?constants.colorsValues.red:constants.colorsValues.green;selectors.$resourceAmount.html(resourceDisplayValue),selectors.$resourceAmount.css("color",resourceDisplayColor),selectors.$resourceStorage.css("color",resourceDisplayColor)}function ArrayReplace(Org,Search,Replace){for(var SearchLen=Search.length,i=0;i<SearchLen;i+=1)Org=Org.replace(Search[i],Replace[i]);return Org}$(document).ready(function(){var ResElements={met:$("#resMet"),cry:$("#resCry"),deu:$("#resDeu"),eng:$("#resEng")},PlanetList=$("#planet");$("#plType").is(":visible")?$(".plBut").width(PlanetList.width()/2-$("#plType").width()+2):$(".plBut").width(PlanetList.width()/2+1),$("#prevPl").click(function(){PlanetList.children().length>1&&(PlanetList.children(":first-child").is(":selected")?PlanetList.children(":last-child").attr("selected",!0):PlanetList.children(":selected").prev().attr("selected",!0),PlanetList.change())}),$("#nextPl").click(function(){PlanetList.children().length>1&&(PlanetList.children(":last-child").is(":selected")?PlanetList.children(":first-child").attr("selected",!0):PlanetList.children(":selected").next().attr("selected",!0),PlanetList.change())}),PlanetList.change(function(){window.location=String($(this).val())}),$("#plType").click(function(){PlanetList.val($('option[value*="cp='+$(this).attr("data-id")+'"]',PlanetList).val()).change()}),ResElements.met.qtip($.extend({content:MToolTip,position:{target:$("#metalmax"),my:"top center",at:"bottom center",adjust:{y:10}}},qTipSettings)),$(".resMet:not(#resMet)").hover(function(){ResElements.met.mouseover()},function(){ResElements.met.mouseout()}),ResElements.cry.qtip($.extend({content:CToolTip,position:{target:$("#crystalmax"),my:"top center",at:"bottom center",adjust:{y:10}}},qTipSettings)),$(".resCry:not(#resCry)").hover(function(){ResElements.cry.mouseover()},function(){ResElements.cry.mouseout()}),ResElements.deu.qtip($.extend({content:DToolTip,position:{target:$("#deuteriummax"),my:"top center",at:"bottom center",adjust:{y:10}}},qTipSettings)),$(".resDeu:not(#resDeu)").hover(function(){ResElements.deu.mouseover()},function(){ResElements.deu.mouseout()}),ResElements.eng.qtip($.extend({content:EToolTip,position:{target:$("#showET"),my:"top center",at:"bottom center",adjust:{y:10}}},qTipSettings)),$(".resEnr:not(#resEng)").hover(function(){ResElements.eng.mouseover()},function(){ResElements.eng.mouseout()})});